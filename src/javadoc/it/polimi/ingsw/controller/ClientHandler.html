<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="it">
<head>
<!-- Generated by javadoc (15) on Fri Jul 02 15:07:11 CEST 2021 -->
<title>ClientHandler</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2021-07-02">
<meta name="description" content="declaration: package: it.polimi.ingsw.controller, class: ClientHandler">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":9,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "alt-color";
var rowColor = "row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar.top">
<div class="skip-nav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.top.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip.navbar.top">
<!--   -->
</span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">it.polimi.ingsw.controller</a></div>
<h1 title="Class ClientHandler" class="title">Class ClientHandler</h1>
</div>
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance">java.lang.Thread
<div class="inheritance">it.polimi.ingsw.controller.ClientHandler</div>
</div>
</div>
<section class="description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code>java.lang.Runnable</code></dd>
</dl>
<hr>
<pre>public class <span class="type-name-label">ClientHandler</span>
extends java.lang.Thread</pre>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested.class.summary">
<h2>Nested Class Summary</h2>
<div class="inherited-list">
<h2 id="nested.classes.inherited.from.class.java.lang.Thread">Nested classes/interfaces inherited from class&nbsp;java.lang.Thread</h2>
<code>java.lang.Thread.State, java.lang.Thread.UncaughtExceptionHandler</code></div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field.summary">
<h2>Field Summary</h2>
<div class="inherited-list">
<h3 id="fields.inherited.from.class.java.lang.Thread">Fields inherited from class&nbsp;java.lang.Thread</h3>
<code>MAX_PRIORITY, MIN_PRIORITY, NORM_PRIORITY</code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor.summary">
<h2>Constructor Summary</h2>
<div class="member-summary">
<table class="summary-table">
<caption><span>Constructors</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">Constructor</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<th class="col-constructor-name" scope="row"><code><span class="member-name-link"><a href="#%3Cinit%3E(it.polimi.ingsw.networking.ThreadedServer)">ClientHandler</a></span>&#8203;(<a href="../networking/ThreadedServer.html" title="class in it.polimi.ingsw.networking">ThreadedServer</a>&nbsp;clientIn)</code></th>
<td class="col-last">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method.summary">
<h2>Method Summary</h2>
<div class="member-summary" id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="active-table-tab">All Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t1" class="table-tab" onclick="show(1);">Static Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="table-tab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="table-tab" onclick="show(8);">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<table class="summary-table" aria-labelledby="t0">
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Method</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color" id="i0">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#avoidCheckLoop()">avoidCheckLoop</a></span>()</code></th>
<td class="col-last">
<div class="block">method used to not check in a loop</div>
</td>
</tr>
<tr class="row-color" id="i1">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#buyACardAction(java.lang.String)">buyACardAction</a></span>&#8203;(java.lang.String&nbsp;idOfCard)</code></th>
<td class="col-last">
<div class="block">method that handles the buy a card action.</div>
</td>
</tr>
<tr class="alt-color" id="i2">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#cheatModeEnabler()">cheatModeEnabler</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="row-color" id="i3">
<td class="col-first"><code><a href="../networking/ThreadedServer.html" title="class in it.polimi.ingsw.networking">ThreadedServer</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getClientConnection()">getClientConnection</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="alt-color" id="i4">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#goToMarketAction(java.lang.String)">goToMarketAction</a></span>&#8203;(java.lang.String&nbsp;string)</code></th>
<td class="col-last">
<div class="block">handles the action that interacts with the marble market.</div>
</td>
</tr>
<tr class="row-color" id="i5">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#handleAnswer()">handleAnswer</a></span>()</code></th>
<td class="col-last">
<div class="block">this is the method that handles the action the client requests to do. it receives a message from the client containing the action that they want to perform, then manages that action
 by either performing it by calling the right methods or by sending a denial.</div>
</td>
</tr>
<tr class="alt-color" id="i6">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#handleEndTurnRequest()">handleEndTurnRequest</a></span>()</code></th>
<td class="col-last">
<div class="block">method that handles the end of turn of a player, if the main action has already been performed a ""operation succesful" message is sent
 if the main action has not been performed yet a "operation denied" message is sent instead</div>
</td>
</tr>
<tr class="row-color" id="i7">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#handleLastTurn()">handleLastTurn</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="alt-color" id="i8">
<td class="col-first"><code>static void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#handleNotStoredResources(it.polimi.ingsw.model.Storage,boolean%5B%5D,int%5B%5D,it.polimi.ingsw.controller.ClientHandler)">handleNotStoredResources</a></span>&#8203;(<a href="../model/Storage.html" title="class in it.polimi.ingsw.model">Storage</a>&nbsp;storage,
boolean[]&nbsp;resourcesStatus,
int[]&nbsp;resources,
<a href="ClientHandler.html" title="class in it.polimi.ingsw.controller">ClientHandler</a>&nbsp;clientConnect)</code></th>
<td class="col-last">
<div class="block">method that handles the case 2) of the goToMarketAction, that requires a player to select a new level for a type of resource that is not stored in any storage level at that given moment. the interaction is
 repeated for every resource that needs to be stored or discarded, until either the storage is full of other types of resources or the all the types are handled. after the action is finished a "end" message is sent to the client</div>
</td>
</tr>
<tr class="row-color" id="i9">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#handleProductionSelection(java.lang.String,boolean%5B%5D)">handleProductionSelection</a></span>&#8203;(java.lang.String&nbsp;string,
boolean[]&nbsp;productionIsUsable)</code></th>
<td class="col-last">
<div class="block">handles all the logic and the last message to send back to the client.</div>
</td>
</tr>
<tr class="alt-color" id="i10">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#handleSomeoneFinishedMoment()">handleSomeoneFinishedMoment</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="row-color" id="i11">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#instantFinish()">instantFinish</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
<tr class="alt-color" id="i12">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#manageLeaderInteractionWithMarket(int%5B%5D)">manageLeaderInteractionWithMarket</a></span>&#8203;(int[]&nbsp;resources)</code></th>
<td class="col-last">
<div class="block">method that sends to the client the leaders available for the power (only when there is one). the method then receives 0 if the client don't want to use the power,
 1 if they want to use the first leader power (if it's a correct leader) or 2 if theyt want to use the second leader (if it's a correct leader).</div>
</td>
</tr>
<tr class="row-color" id="i13">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#PlayOrDiscardLeaders(java.lang.String)">PlayOrDiscardLeaders</a></span>&#8203;(java.lang.String&nbsp;action)</code></th>
<td class="col-last">
<div class="block">method that handles the interaction when playing or discarding a leader, and call all the logic methods that perform the action requested (or deny it)
 <br><br>
 the method also sends back a message stating which state the controller ended with. there can be 4 different types of states
 <br>
 "1" means that the leader has been discarded correctly
 <br>
 "0" means that the leader has been played correcly
 <br>
 "2" means that the player does not meet the conditions to play the leader (meaning that they can play them in the future)
 <br>
 "3" means that the player has already played or discarded the leader, meaning that they can't play them again</div>
</td>
</tr>
<tr class="alt-color" id="i14">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#ProductionAction()">ProductionAction</a></span>()</code></th>
<td class="col-last">
<div class="block">method called when the client requests to perform a production action.</div>
</td>
</tr>
<tr class="row-color" id="i15">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#SendGameEndMessage()">SendGameEndMessage</a></span>()</code></th>
<td class="col-last">
<div class="block">last message containing the info about who won, and how many victory points the winner and the player had.</div>
</td>
</tr>
<tr class="alt-color" id="i16">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#swapLevelsAction(java.lang.String)">swapLevelsAction</a></span>&#8203;(java.lang.String&nbsp;action)</code></th>
<td class="col-last">
<div class="block">method that performs the swap levels action after it's communicated to the server by the client, either way if the selection can be done the operation is completed and an "operation succesful" message is sent
 if the operation cannot be completed (because the action violates some game rules) an "operation denied" message is sent instead</div>
</td>
</tr>
<tr class="row-color" id="i17">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#turnManager()">turnManager</a></span>()</code></th>
<td class="col-last">
<div class="block">general method that handles the turn of a player, by sending an update to the client as soon as his turn starts, then by managing the messages that are sent to the server by the client</div>
</td>
</tr>
<tr class="alt-color" id="i18">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#TurnPhase()">TurnPhase</a></span>()</code></th>
<td class="col-last">
<div class="block">method that should handle all the turnPhase section of the game.</div>
</td>
</tr>
<tr class="row-color" id="i19">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#waitingMyTurn()">waitingMyTurn</a></span>()</code></th>
<td class="col-last">
<div class="block">method that handles the waiting time between the client turn and other clients turn</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inherited-list">
<h3 id="methods.inherited.from.class.java.lang.Thread">Methods inherited from class&nbsp;java.lang.Thread</h3>
<code>activeCount, checkAccess, countStackFrames, currentThread, dumpStack, enumerate, getAllStackTraces, getContextClassLoader, getDefaultUncaughtExceptionHandler, getId, getName, getPriority, getStackTrace, getState, getThreadGroup, getUncaughtExceptionHandler, holdsLock, interrupt, interrupted, isAlive, isDaemon, isInterrupted, join, join, join, onSpinWait, resume, run, setContextClassLoader, setDaemon, setDefaultUncaughtExceptionHandler, setName, setPriority, setUncaughtExceptionHandler, sleep, sleep, start, stop, suspend, toString, yield</code></div>
<div class="inherited-list">
<h3 id="methods.inherited.from.class.java.lang.Object">Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor.detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(it.polimi.ingsw.networking.ThreadedServer)">
<h3>ClientHandler</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="member-name">ClientHandler</span>&#8203;(<span class="parameters"><a href="../networking/ThreadedServer.html" title="class in it.polimi.ingsw.networking">ThreadedServer</a>&nbsp;clientIn)</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method.detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="TurnPhase()">
<h3>TurnPhase</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">TurnPhase</span>()
               throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">method that should handle all the turnPhase section of the game.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="turnManager()">
<h3>turnManager</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">turnManager</span>()
                 throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">general method that handles the turn of a player, by sending an update to the client as soon as his turn starts, then by managing the messages that are sent to the server by the client</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="waitingMyTurn()">
<h3>waitingMyTurn</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">waitingMyTurn</span>()</div>
<div class="block">method that handles the waiting time between the client turn and other clients turn</div>
</section>
</li>
<li>
<section class="detail" id="handleAnswer()">
<h3>handleAnswer</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">handleAnswer</span>()
                  throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">this is the method that handles the action the client requests to do. it receives a message from the client containing the action that they want to perform, then manages that action
 by either performing it by calling the right methods or by sending a denial. After the action is managed a gameUpdate is sent to the client.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getClientConnection()">
<h3>getClientConnection</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../networking/ThreadedServer.html" title="class in it.polimi.ingsw.networking">ThreadedServer</a></span>&nbsp;<span class="member-name">getClientConnection</span>()</div>
</section>
</li>
<li>
<section class="detail" id="PlayOrDiscardLeaders(java.lang.String)">
<h3>PlayOrDiscardLeaders</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">PlayOrDiscardLeaders</span>&#8203;(<span class="parameters">java.lang.String&nbsp;action)</span></div>
<div class="block">method that handles the interaction when playing or discarding a leader, and call all the logic methods that perform the action requested (or deny it)
 <br><br>
 the method also sends back a message stating which state the controller ended with. there can be 4 different types of states
 <br>
 "1" means that the leader has been discarded correctly
 <br>
 "0" means that the leader has been played correcly
 <br>
 "2" means that the player does not meet the conditions to play the leader (meaning that they can play them in the future)
 <br>
 "3" means that the player has already played or discarded the leader, meaning that they can't play them again</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>action</code> - action performed by the client and included in the message ActionMessage.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="ProductionAction()">
<h3>ProductionAction</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">ProductionAction</span>()</div>
<div class="block">method called when the client requests to perform a production action. This method sends to the client a ProductionActionMessage which contains whether they can perform the action
 (via basic checks that DO NOT ensure that the next message from the client contains a performable action). In case they can do some activation the method will send a boolean[] containing which type of production they can activate
 (0-> basic 1-3-> slots production 4-5-> leader productions). This is done in order to facilitate the client choice, but if an illegal action is sent back (by modifying the checks code) the action is still validated in the server, and any illegal states
 are either discarded completely (e.g. asking to produce from an empty slot will results in discarding the request, but still performing legal productions) or results in an denial of request which is sent back to the client.</div>
</section>
</li>
<li>
<section class="detail" id="handleProductionSelection(java.lang.String,boolean[])">
<h3>handleProductionSelection</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">handleProductionSelection</span>&#8203;(<span class="parameters">java.lang.String&nbsp;string,
boolean[]&nbsp;productionIsUsable)</span></div>
<div class="block">handles all the logic and the last message to send back to the client. The message is either a ActionSuccess or a denial of request (if the resources exceeds the maximum payment). for further info on how the logic performs refer to the single methods contained
 in this method or refer to the caller (ClientHandler.ProductionAction) for a brief view on how the different illegal requests are handled</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>string</code> - choice made by the client on which production to activate</dd>
<dd><code>productionIsUsable</code> - boolean[] generated by the controller that indicates which production is theoretically actionable (teh check for all the productions simultaneously is made at the end of the method)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="swapLevelsAction(java.lang.String)">
<h3>swapLevelsAction</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">swapLevelsAction</span>&#8203;(<span class="parameters">java.lang.String&nbsp;action)</span></div>
<div class="block">method that performs the swap levels action after it's communicated to the server by the client, either way if the selection can be done the operation is completed and an "operation succesful" message is sent
 if the operation cannot be completed (because the action violates some game rules) an "operation denied" message is sent instead</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>action</code> - contains the action sent by the client as a JSON string</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="handleEndTurnRequest()">
<h3>handleEndTurnRequest</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">handleEndTurnRequest</span>()</div>
<div class="block">method that handles the end of turn of a player, if the main action has already been performed a ""operation succesful" message is sent
 if the main action has not been performed yet a "operation denied" message is sent instead</div>
</section>
</li>
<li>
<section class="detail" id="buyACardAction(java.lang.String)">
<h3>buyACardAction</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">buyACardAction</span>&#8203;(<span class="parameters">java.lang.String&nbsp;idOfCard)</span></div>
<div class="block">method that handles the buy a card action. If the card can be bought the message sent to the client is a request for a choice of depot (even if the only depot available is one), if the
 card cannot be bought the message sent to the client is a "unavailable action" message.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>idOfCard</code> - card selected by the client (is a string because is from an ActionMessage)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="goToMarketAction(java.lang.String)">
<h3>goToMarketAction</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">goToMarketAction</span>&#8203;(<span class="parameters">java.lang.String&nbsp;string)</span></div>
<div class="block">handles the action that interacts with the marble market. It receives  a string that contains the JSON file of the action sent by the client.
 the action is then performed (given a valid check CLIENT-side for the basic inputs of selecting the section of the market the action is always allowed by the rules, so no check is needed)
 the action can cause 3 interactions:
 <br>
 1) if the client has a leader card that modifies the white ball given resource a new interaction with the client is needed. <br>
 2) if some resources do not have an already placed depotLevel in the storage the client is required to decide what to do with the given resource (either store in an available level or discard them)<br>
 3) discarding resources causes the other players to gain faith points, that can cause a vatican report.<br>
 <br>
 after the action is completed an operation completed message is sent to the client</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>string</code> - JSON file of the action</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="manageLeaderInteractionWithMarket(int[])">
<h3>manageLeaderInteractionWithMarket</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">manageLeaderInteractionWithMarket</span>&#8203;(<span class="parameters">int[]&nbsp;resources)</span>
                                       throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">method that sends to the client the leaders available for the power (only when there is one). the method then receives 0 if the client don't want to use the power,
 1 if they want to use the first leader power (if it's a correct leader) or 2 if theyt want to use the second leader (if it's a correct leader).
 <br> the method updates the resources gained from the market and proceeds to the next step (remember that no ack is then resent to the client, as we want to keep a simple exchange of messages that would be redoundant)
 <br> if any mistake is made by the logic of the client (e.g. sending a wrong number or not even a number at all) the method should keep working and do nothing at all.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>resources</code> - resources to be updated</dd>
<dt>Throws:</dt>
<dd><code>java.io.IOException</code> - client disconnection</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="handleNotStoredResources(it.polimi.ingsw.model.Storage,boolean[],int[],it.polimi.ingsw.controller.ClientHandler)">
<h3>handleNotStoredResources</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">handleNotStoredResources</span>&#8203;(<span class="parameters"><a href="../model/Storage.html" title="class in it.polimi.ingsw.model">Storage</a>&nbsp;storage,
boolean[]&nbsp;resourcesStatus,
int[]&nbsp;resources,
<a href="ClientHandler.html" title="class in it.polimi.ingsw.controller">ClientHandler</a>&nbsp;clientConnect)</span></div>
<div class="block">method that handles the case 2) of the goToMarketAction, that requires a player to select a new level for a type of resource that is not stored in any storage level at that given moment. the interaction is
 repeated for every resource that needs to be stored or discarded, until either the storage is full of other types of resources or the all the types are handled. after the action is finished a "end" message is sent to the client</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>storage</code> - storage of the client</dd>
<dd><code>resourcesStatus</code> - a type of vector generated in the IncreaseResources method inside storage (where this method is called). It's referred as NullLevel inside that section.</dd>
<dd><code>resources</code> - the array has the quantity of resources to be stored or discarded</dd>
<dd><code>clientConnect</code> - connection to the client is needed to handle all the exchange of messages</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="handleSomeoneFinishedMoment()">
<h3>handleSomeoneFinishedMoment</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">handleSomeoneFinishedMoment</span>()</div>
</section>
</li>
<li>
<section class="detail" id="handleLastTurn()">
<h3>handleLastTurn</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">handleLastTurn</span>()
                    throws <span class="exceptions">java.io.IOException</span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="avoidCheckLoop()">
<h3>avoidCheckLoop</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">avoidCheckLoop</span>()</div>
<div class="block">method used to not check in a loop</div>
</section>
</li>
<li>
<section class="detail" id="SendGameEndMessage()">
<h3>SendGameEndMessage</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">SendGameEndMessage</span>()</div>
<div class="block">last message containing the info about who won, and how many victory points the winner and the player had. Also contains a boolean stating if the player is the winner</div>
</section>
</li>
<li>
<section class="detail" id="cheatModeEnabler()">
<h3>cheatModeEnabler</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">cheatModeEnabler</span>()</div>
</section>
</li>
<li>
<section class="detail" id="instantFinish()">
<h3>instantFinish</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name">instantFinish</span>()</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottom-nav" id="navbar.bottom">
<div class="skip-nav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.bottom.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<span class="skip-nav" id="skip.navbar.bottom">
<!--   -->
</span></nav>
</footer>
</div>
</div>
</body>
</html>
